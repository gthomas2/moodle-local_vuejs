"use strict";

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

(function (e, t) {
  "object" === (typeof exports === "undefined" ? "undefined" : _typeof(exports)) && "object" === (typeof module === "undefined" ? "undefined" : _typeof(module)) ? module.exports = t() : "function" === typeof define && define.amd ? define([], t) : "object" === (typeof exports === "undefined" ? "undefined" : _typeof(exports)) ? exports["td-EditSelect"] = t() : e["td-EditSelect"] = t();
})("undefined" !== typeof self ? self : void 0, function () {
  return function (e) {
    var t = {};

    function n(o) {
      if (t[o]) return t[o].exports;
      var r = t[o] = {
        i: o,
        l: !1,
        exports: {}
      };
      return e[o].call(r.exports, r, r.exports, n), r.l = !0, r.exports;
    }

    return n.m = e, n.c = t, n.d = function (e, t, o) {
      n.o(e, t) || Object.defineProperty(e, t, {
        enumerable: !0,
        get: o
      });
    }, n.r = function (e) {
      "undefined" !== typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
        value: "Module"
      }), Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }, n.t = function (e, t) {
      if (1 & t && (e = n(e)), 8 & t) return e;
      if (4 & t && "object" === _typeof(e) && e && e.__esModule) return e;
      var o = Object.create(null);
      if (n.r(o), Object.defineProperty(o, "default", {
        enumerable: !0,
        value: e
      }), 2 & t && "string" != typeof e) for (var r in e) {
        n.d(o, r, function (t) {
          return e[t];
        }.bind(null, r));
      }
      return o;
    }, n.n = function (e) {
      var t = e && e.__esModule ? function () {
        return e["default"];
      } : function () {
        return e;
      };
      return n.d(t, "a", t), t;
    }, n.o = function (e, t) {
      return Object.prototype.hasOwnProperty.call(e, t);
    }, n.p = "", n(n.s = "38e8");
  }({
    "38e8": function e8(e, t, n) {
      "use strict";

      n.r(t);
      n("e6e2");

      var o = function o() {
        var e = this,
            t = e.$createElement,
            n = e._self._c || t;
        return n("div", {
          staticClass: "td-edit-select"
        }, [n("select", {
          directives: [{
            name: "model",
            rawName: "v-model",
            value: e.val,
            expression: "val"
          }],
          staticClass: "mr-2",
          attrs: {
            disabled: this.row.updating
          },
          on: {
            change: [function (t) {
              var n = Array.prototype.filter.call(t.target.options, function (e) {
                return e.selected;
              }).map(function (e) {
                var t = "_value" in e ? e._value : e.value;
                return t;
              });
              e.val = t.target.multiple ? n : n[0];
            }, function (t) {
              e.onChange(t);
            }]
          }
        }, e._l(e.opts, function (t) {
          return n("option", {
            key: t.value,
            domProps: {
              value: t.value
            }
          }, [e._v(e._s(t.text))]);
        })), e.changed ? n("i", {
          staticClass: "fa fa-check-circle",
          attrs: {
            tabindex: "0",
            role: "button",
            "aria-label": "Confirm",
            title: "Confirm"
          },
          on: {
            click: e.confirm,
            keyup: function keyup(t) {
              return "button" in t || !e._k(t.keyCode, "enter", 13, t.key, "Enter") ? e.confirm(t) : null;
            }
          }
        }) : e._e(), this.row.updating ? n("i", {
          staticClass: "fa fa-spinner fa-pulse"
        }) : e._e()]);
      },
          r = [],
          i = {
        props: ["value", "field", "row", "xprops", "options"],
        data: function data() {
          return {
            val: this.value,
            changed: !1,
            opts: this.options && this.options.options ? this.options.options : null
          };
        },
        updated: function updated() {
          this.changed || (this.val = this.value);
        },
        methods: {
          onChange: function onChange(e) {
            this.changed = !0;
          },
          confirm: function confirm() {
            this.changed = !1, this.xprops.eventbus.$emit("SELECT_CHANGE_CONFIRMED", {
              row: this.row,
              val: this.val
            });
          }
        }
      },
          a = i;

      function s(e, t, n, o, r, i, a, s) {
        var u,
            l = "function" === typeof e ? e.options : e;
        if (t && (l.render = t, l.staticRenderFns = n, l._compiled = !0), o && (l.functional = !0), i && (l._scopeId = "data-v-" + i), a ? (u = function u(e) {
          e = e || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext, e || "undefined" === typeof __VUE_SSR_CONTEXT__ || (e = __VUE_SSR_CONTEXT__), r && r.call(this, e), e && e._registeredComponents && e._registeredComponents.add(a);
        }, l._ssrRegister = u) : r && (u = s ? function () {
          r.call(this, this.$root.$options.shadowRoot);
        } : r), u) if (l.functional) {
          l._injectStyles = u;
          var c = l.render;

          l.render = function (e, t) {
            return u.call(t), c(e, t);
          };
        } else {
          var f = l.beforeCreate;
          l.beforeCreate = f ? [].concat(f, u) : [u];
        }
        return {
          exports: e,
          options: l
        };
      }

      var u = s(a, o, r, !1, null, null, null),
          l = u.exports;
      t["default"] = l;
    },
    e6e2: function e6e2(e, t, n) {
      var o;
      "undefined" !== typeof window && (o = window.document.currentScript) && (o = o.src.match(/(.+\/)[^/]+\.js$/)) && (n.p = o[1]);
    }
  })["default"];
});